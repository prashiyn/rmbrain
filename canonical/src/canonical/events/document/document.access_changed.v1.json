{
  "$id": "https://schemas.rmbrain.ai/events/document.access_changed.v1.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Document Access Changed Event Payload",
  "type": "object",
  "required": ["document_id", "access"],
  "properties": {
    "document_id": { "type": "string" },
    "access": {
      "type": "object",
      "required": ["scope"],
      "properties": {
        "scope": {
          "type": "string",
          "enum": [
            "tenant",
            "team",
            "rm",
            "client",
            "relationship",
            "system"
          ]
        },
        "team_ids": { "type": "array", "items": { "type": "string" } },
        "rm_ids": { "type": "array", "items": { "type": "string" } },
        "client_ids": { "type": "array", "items": { "type": "string" } },
        "relationship_ids": { "type": "array", "items": { "type": "string" } },
        "effective_from": { "type": "string", "format": "date-time" },
        "effective_to": { "type": "string", "format": "date-time" },
        "read_only": { "type": "boolean", "default": true }
      }
    }
  }
}

